<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Circuit Simulator</title>
  <link rel="stylesheet" href="./output.css" />
</head>

<body oncontextmenu="return false">
  <div class="flex sticky top-0 h-14 z-20 bg-white border-b border-zinc-200">
    <div>
      <button class="h-full left-3 mx-3 my-0 px-4 py-0 top-button" onclick="openAccordionMenu('menu-circuits', 'grid')">
        Circuits
      </button>
      <div class="top-accordion top-14 left-3 shadow z-20" id="menu-circuits" style="display: none">
        <button onclick="openSaveMenu()">
          <span> Save </span>
        </button>
        <button onclick="openSaveMenu()">
          <span> Save As </span>
        </button>
        <button onclick="openLoadMenu()">
          <span> Load/Import </span>
        </button>
      </div>
    </div>

    <input class="top-name focus-outline" type="text" placeholder="Untitled" />
  </div>

  <div id="canvas-container"></div>
  <!--canvas id="c" width="500" height="400" style="border: 1px solid black"></canvas-->
  <div class="flex flex-row">
    <div id="gate-menu" class="z-10 flex flex-col gap-y-3 left-0 top-14 w-2/5 max-w-64 h-screen p-4 bg-white shadow-lg">
      <input class="p-2 h-8 rounded-md border-2 border-zinc-200 focus-outline" type="text" placeholder="Search" />

      <button class="flex flex-row justify-between z-20 h-6 bg-transparent text-left px-2" onclick="openAccordionMenu('gate-io', 'grid', 'gate-io-arrow')">
        Input/Output
        <img id="gate-io-arrow" src="sprites/ui/expand-more.svg" class="ease-in-out duration-200">
      </button>
      <div class="accordion-gate" id="gate-io" style="display: none">
        <button class="text-xs" onclick="Input.add()">INPUT</button>
        <button class="text-xs" onclick="Output.add()">OUTPUT</button>
      </div>

      <button class="flex flex-row justify-between z-20 h-6 bg-transparent text-left px-2" onclick="openAccordionMenu('gate-basic', 'grid', 'gate-basic-arrow')">
        Gates
        <img id="gate-basic-arrow" src="sprites/ui/expand-more.svg" class="ease-in-out duration-200">
      </button>
      <div class="accordion-gate" id="gate-basic" style="display: none">
        <button class="text-xs" onclick="NotGate.add()">NOT</button>
        <button class="text-xs" onclick="AndGate.add()">AND</button>
        <button class="text-xs" onclick="OrGate.add()">OR</button>
        <button class="text-xs" onclick="NandGate.add()">NAND</button>
        <button class="text-xs" onclick="NorGate.add()">NOR</button>
        <button class="text-xs" onclick="XorGate.add()">XOR</button>
        <button class="text-xs" onclick="XnorGate.add()">XNOR</button>
        <button class="text-xs" onclick="HalfAdder.add()">
          Half Adder
        </button>
        <button class="text-xs" onclick="FullAdder.add()">
          Full Adder
        </button>
        <button class="text-xs" onclick="TriStateBuffer.add()">
          Tri-State Buffer
        </button>
      </div>

      <button class="flex flex-row justify-between z-20 h-6 bg-transparent text-left px-2" onclick="openAccordionMenu('gate-latches', 'grid', 'gate-latches-arrow')">
        Latches
        <img id="gate-latches-arrow" src="sprites/ui/expand-more.svg" class="ease-in-out duration-200">
      </button>
      <div class="accordion-gate" id="gate-latches" style="display: none">
        <button class="text-xs" onclick="SRLatch.add()">
          SR Latch
        </button>
        <button class="text-xs" onclick="DLatch.add()">D Latch</button>
      </div>

      <button class="flex flex-row justify-between z-20 h-6 bg-transparent text-left px-2" onclick="openAccordionMenu('gate-nbit', 'grid', 'gate-nbit-arrow')">
        N-bit
        <img id="gate-nbit-arrow" src="sprites/ui/expand-more.svg" class="ease-in-out duration-200">
      </button>
      <div class="accordion-gate" id="gate-nbit" style="display: none">
        <button class="text-xs" onclick="Splitter.add()">
          Splitter
        </button>
        <button class="text-xs" onclick="NBitInput.add()">
          N-bit Input
        </button>
        <button class="text-xs" onclick="BitwiseNotGate.add()">
          Bitwise NOT Gate
        </button>
      </div>

      <div id="module-button-container">
        <button onclick="toSubModule()">Make Module</button>
      </div>
    </div>

    <div class="grow">
      <div id="control-tab" class="flex items-center h-10 gap-x-1 grow bg-white border-b border-zinc-200">
        <div class="flex items-center h-10 gap-x-0 left-4">
          <button id="control-edit" class="bg-white px-2 h-6 text-sm border border-zinc-200 rounded-l-md"
            onclick="setControlMode('edit')">
            Edit
          </button>
          <button id="control-pan" class="bg-white px-2 h-6 text-sm border-y border-zinc-200"
            onclick="setControlMode('pan')">
            Pan
          </button>
          <button id="control-delete" class="bg-white px-2 h-6 text-sm border border-zinc-200 rounded-r-md"
            onclick="setControlMode('delete')">
            Delete
          </button>
        </div>
      </div>
      <div id="alert-container" class="absolute p-4 bottom-2 w-48">
        <p id="alert-error" class="px-2 py-1.5 bg-red-100 border border-red-500 text-red-800 text-sm break-words rounded my-1" style="display: none;">
        </p>
      </div>
    </div>

  </div>

  <div id="selecting-div" class="fixed right-8 top-32 w-48 p-4 rounded-xl bg-white shadow-md" style="display: none">
    <h2 id="selecting-name" class="font-bold text-base">
    </h2>

    <div id="selecting-input" style="display: none">
      <input type="range" min="-1" max="1" id="selecting-input-value" value="0" step="1" oninput="setInput()" />
    </div>

    <div id="selecting-nbitinput" style="display: none">
      <div>
        <p class="text-sm">Value</p>
        <input id="selecting-nbitinput-value" class="border p-1 h-5 w-full rounded-sm focus-outline text-sm" type="text"
          value="0" oninput="setNBitInput()" />
      </div>
    </div>

    <div id="selecting-splitter" style="display: none">
      <div class="flex justify-between">
        <p class="text-sm">Bit Width</p>
        <input id="selecting-bitwidth" class="border p-1 h-5 w-12 rounded-sm focus-outline" type="number" min="1"
          value="1" oninput="setSplitter()" />
      </div>
      <div>
        <p class="text-sm">Bit Split</p>
        <input id="selecting-bitsplit" class="border p-1 h-5 w-full rounded-sm focus-outline text-sm" type="text"
          placeholder="0 1 2:7" oninput="setSplitter()" />
      </div>
    </div>
  </div>

  <div id="background-blur" class="background-blur" style="display: none"></div>
  <div id="save-menu" class="menu rounded-xl shadow-lg" style="display: none"></div>
  <div id="modal-menu"
    class="z-20 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 p-4 bg-white rounded-xl shadow-lg"
    style="display: none;">
    <h1 id="modal-menu-title"></h1>
    <p></p>
  </div>

  <p id="fps-counter" style="position: fixed; left: 89%; top: 16%">0</p>

  <script src="src/p5.min.js"></script>
  <script src="src/init.js"></script>
  <script src="src/camera.js"></script>
  <script src="src/classes/state.js"></script>
  <script src="src/classes/wire.js"></script>
  <script src="src/classes/modulenode.js"></script>
  <script src="src/classes/module.js"></script>
  <script src="src/classes/circuit.js"></script>
  <script src="src/gates/basic.js"></script>
  <script src="src/gates/latches.js"></script>
  <script src="src/gates/nbit.js"></script>
  <!--
      <script src="lib/fabric.min.js"></script>
      <script src="gate-data.js"></script>
      <script src="gate.js"></script>
      <script src="mouse.js"></script>
    -->
  <script src="src/ui.js"></script>
  <script src="src/index.js"></script>
</body>

</html>